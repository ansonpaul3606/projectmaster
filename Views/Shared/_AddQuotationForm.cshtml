


@model PerfectWebERP.Models.QuotationModel.QuotationView

@*Warranty Window*@
<div class="modal fade" perfect-class="formGroupModalwarranty" id="modalWarrantyWindow">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header border-0">
                <h5 class="modal-title">Warranty Details</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body" perfect-class="formGroup" style="max-height: calc(100vh - 200px); overflow-y: auto;padding: 1rem;">
                <div class="row">


                    <div class="col-sm-6">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-5 col-form-label">Sub Product</label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <input type="text" class="form-control" name="subProName" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                    <input type="hidden" name="subProductID" class="" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                                    <div class="input-group-append">
                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-search" type="button" BindName="ProdName" BindVal="ProductID" perfect-css="button"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-5 col-form-label">
                                <span perfect-class="formGroupLabel">Type</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-7">

                                <div class="input-group">
                                    <select class="form-control" name="WarrantyType" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="select">
                                        @if (!(Model.ModuleTypeList is null))
                                        {
                                            foreach (var Module in Model.ModuleTypeList)
                                            {
                                                <option value="@Module.Mode">@Module.ModuleName</option>
                                            }
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-5 col-form-label">
                                <span perfect-class="formGroupLabel">Repl. Warranty Date</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <input type="date" class="form-control perfectValidate_date" name="" perfect-class="formGroupControl" perfect-ctype="date" perfect-css="date" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-5 col-form-label">
                                <span perfect-class="formGroupLabel">Serv. Warranty Date</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <input type="date" class="form-control perfectValidate_date" name="" perfect-class="formGroupControl" perfect-ctype="date" perfect-css="date" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-10">

                    </div>

                    <div class="col-sm-2">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-5 col-form-label">
                                <span perfect-class="formGroupLabel">&nbsp;</span>

                            </label>
                            <div class="col-sm-7">
                                <div class="input-group">
                                    <button type="button" class="btn btn-primary1 " data-dismiss="modal">Add</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary light" data-dismiss="modal">Submit</button>
                </div>
            </div>
        </div>
    </div>
</div>


@*Sales Order Window*@

@*<div class="card">
    <div class="card-header">
        <h4 class="card-title col-12">
            Quotation
            <span class="float-right" perfect-class="formTitle">
                <a href="#" class="btn btn-success shadow btn-xs sharp mr-1">
                    <i class="fa fa-plus"></i>
                </a>
            </span>
        </h4>
    </div>

    <div class="card-body">
        <form id="" class="form-valide" perfect-class="form" action="#" method="post" perfect-onFormSuccess="">
            <div>
                @Html.AntiForgeryToken()
                <div class="row">
                    <div class="col-sm-4" style="display:none">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Mode</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="hidden" name="ModeVal" />
                                <select class="form-control perfectValidate_string" name="TransMode" perfect-selectButtonAction="testing" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="select">
                                    @if (!(Model.ModuleTypeList is null))
                                    {
                                        foreach (var Module in Model.ModuleTypeList)
                                        {
                                            <option value="@Module.Mode">@Module.ModuleName</option>
                                        }
                                    }
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4" style="display:none">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Sl No</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="number" class="form-control" name="slno" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="input" readonly value="@Model.SortOrder" />
                                <input type="hidden" name="ID_SalesOrder" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                                <input type="hidden" name="SoNo" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Quotation No#</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" name="QuotationNo" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                </div>
                            </div>
                        </div>
                    </div>



                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Quotation Date</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="date" class="form-control perfectValidate_date" name="SalesOrderDate" perfect-class="formGroupControl" perfect-ctype="date" perfect-css="date" />
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Import From</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="hidden" name="ImportID" />
                                    <select class="form-control" name="ddlImportsList" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="select" onchange="fn_showandHideNewCustomerButton(this)">
                                        <option value="">Please Select</option>
                                        <option value="1">Customer</option>
                                        <option value="2">Lead</option>
                                    </select>

                                    <div class="input-group-append">
                                        <button id="addcountry-jq-searchButton3" data-toggle="tooltip" data-placement="top" data-html="true" title="Import from Customer,Lead" class="btn btn-primary" type="button" perfect-css="button" onclick="fn_showQuotationImportList(this)"><i class="las la-file-import la-lg"></i></button>
                                        <button id="customerbtn" class="btn btn-primary fa fa-plus" type="button" perfect-css="button" onclick="fn_openNewCustomerWindow(this)" style="display:none" title="Add Customer"></button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Customer Name</span>                               
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="hidden" name="ID_Customer" />
                                    <input type="hidden" name="ID_LeadGenerate" />
                                    <input type="text" class="form-control perfectValidate_string" name="CustomeName" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Mobile No</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" class="form-control perfectValidate_mobile" name="MobileNo" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Expired Date</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="date" class="form-control" name="SalesOrdExpDate" perfect-class="formGroupControl" perfect-ctype="date" perfect-css="date" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">                    
                    <div class="col-sm-8">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-2 col-form-label">
                                <span perfect-class="formGroupLabel">Address</span>
                            </label>
                            <div class="col-sm-10">
                                <div class="input-group">                                   
                                    <textarea class="form-control " perfect-class="formGroupControl"  name="SoAddress" rows="1" placeholder="" perfect-ctype="input" perfect-css="input"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                     
                    </div>
                </div>


                <div class="row">
                    <div class="col-sm-12">

                        <div class="daccordion__header">
                            <span class="accordion__header--text">Details</span>
                        </div>

                        <div class="row">
                            <div class="col-sm-12 " perfect-class="TempTableProduct">
                                <br />
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">Product&nbsp;<span class="text-danger">*</span></label>
                                            <div class="col-sm-8">
                                                <div class="input-group">
                                                    <input type="text" class="form-control " perfect-tempTable-Quotation="ProdName" name="ProdName" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                                    <input type="hidden" name="FK_Product" perfect-tempTable-Quotation="FK_Product" class="" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                                                    <div class="input-group-append">
                                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-search" type="button" onclick="GetCmnPopUpSearchValAssign(this, 39, 'Product Details', [], ['SodMRP','SodSalPrice'])" BindName="ProdName" BindVal="FK_Product" perfect-css="button"></button>
                                                    </div>
                                                </div>
                                                <div class="text-danger temptableError"></div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">Quantity&nbsp;<span class="text-danger">*</span></label>
                                            <div class="col-sm-8">
                                                <input type="number" class="form-control text-right" perfect-tempTable-Quotation="SodSalQuantity" name="SodSalQuantity" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" onchange="fn_calculateActualPrice(this)" />
                                                <div class="text-danger temptableError"></div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                <span perfect-class="formGroupLabel">MRP</span>

                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="SodMRP" name="SodMRP" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                <span perfect-class="formGroupLabel">Price</span>
                                                <span class="text-danger">*</span>
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="hidden" class="form-control" perfect-tempTable-Quotation="Sprice" name="Sprice" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="SalPrice" name="SodSalPrice" onchange="fn_calculateActualPrice(this)" perfect-class="formGroupControl" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-ctype="input" perfect-css="input" />
                                                <div class="text-danger temptableError"></div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                Disc %
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="number" class="form-control text-right" perfect-tempTable-Quotation="SodSalDiscountPercent" name="SodSalDiscountPercent" perfect-class="formGroupControl" onchange="fn_calculateDiscAmount(this)" perfect-ctype="input" perfect-css="input" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                Disc Amt
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="SodSalDiscount" name="SodSalDiscount" perfect-class="formGroupControl" onchange="fn_calculateDiscPer(this)" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-ctype="input" perfect-css="input" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                <span perfect-class="formGroupLabel">Tax </span>
                                            </label>
                                            <div class="col-sm-8">
                                                <div class="input-group">
                                                    <input type="number" class="form-control text-right" perfect-tempTable-Quotation="SodSalTaxAmount" placeholder="" name="SodSalTaxAmount" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />

                                                    <div class="input-group-append">
                                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-search" type="button" perfect-css="button" onclick="fn_showTaxWindow(this,1)"></button>
                                                        <div class="modal fade" perfect-class="formGroupModalTax" id="formGroupModalTax">
                                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                                <div class="modal-content  rounded-0">
                                                                    <div class="modal-header border-0">
                                                                        <h5 class="modal-title">Tax Details</h5>
                                                                        <button type="button" class="close" data-dismiss="modal">
                                                                            <span>&times;</span>
                                                                        </button>
                                                                    </div>
                                                                    <div class="modal-body" perfect-class="formGroup" style="max-height: calc(100vh - 200px); overflow-y: auto;padding: 1rem;">
                                                                        <table id="zero_config" class="table mb-0  table-striped  text-black">
                                                                            <thead class="bg-primary text-white">
                                                                                <tr>
                                                                                    <th class="t-head">SlNo</th>
                                                                                    <th class="t-head" style="Display:none">FK_TaxType</th>
                                                                                    <th class="t-head">TaxType</th>
                                                                                    <th class="t-head">Percentage</th>
                                                                                    <th class="t-head">Amount</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody id="formGroupModalTaxbody"></tbody>
                                                                            <tfoot>
                                                                            </tfoot>
                                                                        </table>
                                                                        <div class="modal-footer">

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="temptableError"></span>

                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                Remarks
                                            </label>
                                            <div class="col-sm-8">
                                                <textarea class="form-control " perfect-class="formGroupControl" perfect-tempTable-Quotation="SodRemarks" name="SodRemarks" rows="1" placeholder="" perfect-ctype="input" perfect-css="input"></textarea>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-10">

                                    </div>
                                    <div class="col-sm-2">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">&nbsp;</label>
                                            <div class="col-sm-8">
                                                <div class="row">
                                                    <button class="btn btn-primary1" type="button" data-toggle="tooltip" data-placement="top" data-html="true" title="Add New Product" onclick="fn_createTable(this,'Quotation',['FK_Product'])">Add</button>
                                                    <button class="btn btn-light1" type="button" data-toggle="tooltip" data-placement="top" data-html="true" onclick="fn_resetQuotationItem(this)">Clear</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="col-sm-12">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <div class="table-responsive" perfect-tempTable="Quotation" id="QuotationItemHead" perfect-tempTable-lastindex="0" perfect-tempTable-action="0"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel"> Discount</span>

                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control text-right" placeholder="" name="SalOrderDiscount" onchange="fn_roundoff(this)" perfect-class="formGroupControl" perfect-ctype="input" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-css="input" />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Other Charge</span>

                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" class="form-control text-right" name="OtherCharge" onchange="fn_roundoff(this)" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                    <div class="input-group-append">
                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-plus" type="button" perfect-css="button" onclick="fn_showOtherCharges(this)"></button>
                                        <div class="modal fade" perfect-class="formGroupModalOtherCharge" id="formGroupModalOtherCharge">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content  rounded-0">
                                                    <div class="modal-header border-0">
                                                        <h5 class="modal-title">Other Charge Details</h5>
                                                        <button type="button" class="close" data-dismiss="modal">
                                                            <span>&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body" perfect-class="formGroup" style="max-height: calc(100vh - 200px); overflow-y: auto;padding: 1rem;">
                                                        <table id="zero_configOthercharge" class="table mb-0  table-striped  text-black">
                                                            <thead class="bg-primary text-white">
                                                                <tr>
                                                                    <th class="t-head">SlNo</th>
                                                                    <th class="t-head" style="display:none">ID_OtherChargeType</th>
                                                                    <th class="t-head">Type</th>
                                                                    <th class="t-head">Trans Type</th>
                                                                    <th class="t-head">Amount</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody id="formGroupModalOtherChargebody"></tbody>
                                                            <tfoot>
                                                            </tfoot>
                                                        </table>


                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-danger light" data-dismiss="modal" onclick="fn_bindOtherChargesAmount(this)">Ok</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel"> Sub Total</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control perfectValidate_decimal text-right" name="SalBillTotal" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" onchange="fn_roundoff(this)" readonly />

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">

                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Roundoff</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control text-right" placeholder="" readonly name="SalOrderRoundoff" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel"> Net Amount</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control perfectValidate_decimal text-right" name="SalNetAmount" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" placeholder="" readonly />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-footer text-right" perfect-class="formFooter">
                    <button id="" type="button" class="btn btn-primary mr-3 addcompany-jq-addnewuserUpdate d-none" name="update" perfect-css="button" onclick="fn_UpdateQuotation(this,'update')"><i class="fa fa-refresh fa-spin loaderClass"></i>Update</button>
                    <button id="addcompany-jq-addnewuser" type="button" class="btn btn-primary mr-3 " name="add" perfect-css="button" onclick="fn_UpdateQuotation(this,'new')"><i class="fa fa-refresh fa-spin loaderClass "></i>Save</button>
                    <button type="button" class="btn btn-danger" perfect-css="button" onclick="fn_resetQuotation(this)" name="reset">Clear</button>
                </div>
            </div>
        </form>

    </div>
</div>*@
<div class="card">
    <div class="card-header">
        <h4 class="card-title col-12">Quotation<span class="badge light badge-success float-right" perfect-class="formTitle">ADD</span></h4>
    </div>

    <div class="card-body">
        <form id="" class="form-valide" perfect-class="form" action="#" method="post" perfect-onFormSuccess="">
            <div>
                @Html.AntiForgeryToken()
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Mode</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="hidden" name="ModeVal" />                               
                                <select class="form-control" name="ddlModeList" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="select">
                                    <option value="">Please Select</option>
                                    <option value="1">Inward</option>
                                    <option value="2">Outward</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4" style="display:none">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Sl No</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="number" class="form-control" name="slno" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="input" readonly value="@Model.SortOrder" />
                                <input type="hidden" name="ID_SalesOrder" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                                <input type="hidden" name="SoNo" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Quotation Date</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="date" class="form-control perfectValidate_date" name="QuotationDate" perfect-class="formGroupControl" perfect-ctype="date" perfect-css="date" />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Import From</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="hidden" name="ImportID" />
                                    <select class="form-control" id="ddlImportsList" name="ddlImportsList" perfect-class="formGroupControl" perfect-ctype="select" perfect-css="select" onchange="fn_showandHideNewCustomerButton(this)">
                                        <option value="">Please Select</option>
                                        <option value="0">Supplier</option>
                                        <option value="1">Customer</option>
                                        <option value="2">Lead</option>
                                        <option value="3">Other</option>
                                    </select>

                                    <div class="input-group-append">
                                        <button id="btnShowList" data-toggle="tooltip" data-placement="top" data-html="true" title="Import from Customer,Lead and Supplier" class="btn btn-primary" type="button" perfect-css="button" onclick="fn_showSalesOrderImportList(this)"><i class="las la-file-import la-lg"></i></button>
                                        <button id="customerbtn" class="btn btn-primary fa fa-plus" type="button" perfect-css="button" onclick="fn_openNewCustomerWindow(this)" style="display:none" title="Add Customer"></button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Contact Name</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="hidden" name="ID_Customer" />
                                    <input type="hidden" name="ID_LeadGenerate" />
                                    <input type="hidden" name="ID_Quotation" value="0" />
                                    <input type="text" class="form-control perfectValidate_string" name="ContactName" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Mobile No</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" class="form-control perfectValidate_mobile" name="MobileNo" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                                </div>
                            </div>
                        </div>
                    </div>

                
                    <div class="col-sm-4" id="QuoAddressSection" style="display:none">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                Address
                            </label>
                            <div class="col-sm-8">
                                <textarea class="form-control " perfect-class="formGroupControl"  name="QuoAddress" rows="1" placeholder="" perfect-ctype="input" perfect-css="input"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="daccordion__header">
                            <span class="accordion__header--text">Project/Product Details</span>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 " perfect-class="TempTableProduct">
                                <br />
                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">Product&nbsp;<span class="text-danger">*</span></label>
                                            <div class="col-sm-8">
                                                <div class="input-group">
                                                    <input type="text" class="form-control " perfect-tempTable-Quotation="ProdName" name="ProdName" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                                    <input type="hidden" name="FK_Product" perfect-tempTable-Quotation="FK_Product" class="" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                                                    <div class="input-group-append">
                                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-search" type="button" onclick="GetCmnPopUpSearchValAssign(this, 39, 'Product Details', [], ['SodMRP','SodSalPrice'])" BindName="ProdName" BindVal="FK_Product" perfect-css="button"></button>
                                                    </div>
                                                </div>
                                                <div class="text-danger temptableError"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">Quantity&nbsp;<span class="text-danger">*</span></label>
                                            <div class="col-sm-8">
                                                <input type="number" class="form-control text-right" perfect-tempTable-Quotation="QpdQuantity" name="SodSalQuantity" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" onchange="fn_calculateActualPrice(this)" />
                                                <div class="text-danger temptableError"></div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                <span perfect-class="formGroupLabel">MRP</span>

                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="QpdMRP" name="SodMRP" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                <span perfect-class="formGroupLabel">Price</span>
                                                <span class="text-danger">*</span>
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="hidden" class="form-control" perfect-tempTable-Quotation="Sprice" name="Sprice" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="QpdRate" name="QpdRate" onchange="fn_calculateActualPrice(this)" perfect-class="formGroupControl" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-ctype="input" perfect-css="input" />
                                                <div class="text-danger temptableError"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                Disc %
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="QpdDiscountPercent" name="QpdDiscountPercent" perfect-class="formGroupControl" onchange="fn_calculateDiscAmount(this)" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-ctype="input" perfect-css="input" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">
                                                Disc Amt
                                            </label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control text-right" perfect-tempTable-Quotation="QpdDiscount" name="QpdDiscount" perfect-class="formGroupControl" onchange="fn_calculateDiscPer(this)" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-ctype="input" perfect-css="input" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-4 col-form-label">Model</label>
                                            <div class="col-sm-8">
                                                <div class="input-group">
                                                    <input type="text" class="form-control " perfect-tempTable-Quotation="ModelName" name="ModelName" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                                    <input type="hidden" name="FK_Model" perfect-tempTable-Quotation="FK_Model" class="" perfect-class="formGroupControl" perfect-ctype="hidden" perfect-css="input" />
                                                    <div class="input-group-append">
                                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-search" type="button" onclick="GetCmnPopUpSearchValAssign(this, 42, 'Product Details', [], [])" BindName="ModelName" BindVal="FK_Model" perfect-css="button"></button>
                                                    </div>
                                                </div>
                                                <div class="text-danger temptableError"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <label class="col-sm-5 col-form-label">Warranty/AMC&nbsp;</label>
                                            <div class="col-sm-7">
                                                <div class="input-group">
                                                    <div class="input-group-append">
                                                        &nbsp;&nbsp; <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-plus" type="button" perfect-css="button" title="Add Warranty Details" onclick="GetWarrantylists(this)"></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                </div>
                                <div class="card-footer text-right" perfect-class="formFooter">
                                    <button class="btn btn-primary1" type="button" data-toggle="tooltip" data-placement="top" data-html="true" title="Add New Product" onclick="fn_createTable(this,'Quotation',['FK_Product'])">Add</button>
                                    <button class="btn btn-light1" type="button" data-toggle="tooltip" data-placement="top" data-html="true" onclick="fn_resetSalesOrderItem(this)">Clear</button>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="form-group row" perfect-class="formGroup">
                                            <div class="table-responsive" perfect-tempTable="Quotation" id="salesOrdeItemHead" perfect-tempTable-lastindex="0" perfect-tempTable-action="0"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel"> Discount</span>

                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control text-right" placeholder="" name="SalOrderDiscount" onchange="fn_roundoff(this)" perfect-class="formGroupControl" perfect-ctype="input" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" perfect-css="input" />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Other Charge</span>

                            </label>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <input type="text" class="form-control text-right" name="OtherCharge" onchange="fn_roundoff(this)" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" readonly />
                                    <div class="input-group-append">
                                        <button id="addcountry-jq-searchButton3" class="btn btn-primary fa fa-plus" type="button" perfect-css="button" onclick="fn_showOtherCharges(this)"></button>
                                        <div class="modal fade" perfect-class="formGroupModalOtherCharge" id="formGroupModalOtherCharge">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content  rounded-0">
                                                    <div class="modal-header border-0">
                                                        <h5 class="modal-title">Other Charge Details</h5>
                                                        <button type="button" class="close" data-dismiss="modal">
                                                            <span>&times;</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body" perfect-class="formGroup" style="max-height: calc(100vh - 200px); overflow-y: auto;padding: 1rem;">
                                                        <table id="zero_configOthercharge" class="table mb-0  table-striped  text-black">
                                                            <thead class="bg-primary text-white">
                                                                <tr>
                                                                    <th class="t-head">SlNo</th>
                                                                    <th class="t-head" style="display:none">ID_OtherChargeType</th>
                                                                    <th class="t-head">Type</th>
                                                                    <th class="t-head">Trans Type</th>
                                                                    <th class="t-head">Amount</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody id="formGroupModalOtherChargebody"></tbody>
                                                            <tfoot>
                                                            </tfoot>
                                                        </table>


                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-danger light" data-dismiss="modal" onclick="fn_bindOtherChargesAmount(this)">Ok</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel"> Sub Total</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control perfectValidate_decimal text-right" name="SalBillTotal" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" onchange="fn_roundoff(this)" readonly />

                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                       
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel">Roundoff</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control text-right" placeholder="" readonly name="SalOrderRoundoff" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group row" perfect-class="formGroup">
                            <label class="col-sm-4 col-form-label">
                                <span perfect-class="formGroupLabel"> Net Amount</span>
                                <span class="text-danger">*</span>
                            </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control text-right perfectValidate_decimal" placeholder="" readonly name="SalNetAmount" perfect-class="formGroupControl" perfect-ctype="input" perfect-css="input" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-footer text-right" perfect-class="formFooter">
                    <button id="" type="button" class="btn btn-primary mr-3 addcompany-jq-addnewuserUpdate d-none" name="update" perfect-css="button" onclick="fn_UpdateSalesOrder(this,'update')"><i class="fa fa-refresh fa-spin loaderClass"></i>Update</button>
                    <button id="addcompany-jq-addnewuser" type="button" class="btn btn-primary mr-3 " name="add" perfect-css="button" onclick="fn_UpdateSalesOrder(this,'new')"><i class="fa fa-refresh fa-spin loaderClass "></i>Save</button>
                    <button type="button" class="btn btn-light" perfect-css="button" onclick="fn_resetSalesOrder(this)" name="reset">Clear</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="~/Scripts/jqDOM/searchDOMCreation.js"></script>
<script>

 //on load functions
 $(document).ready(function ()
 {


	initFunctions('form');
    });
   
  
    //to load Imports List
    function fn_showQuotationImportList(element) {

        let $thisForm = $(element).closest('[perfect-class="form"]');
        switch (parseInt($thisForm.find('[name="ddlImportsList"]').val())) {
            case 1:
                GetCmnPopUpSearchValAssign(element, 7, 'Customer List', [], ['ID_Customer', 'CustomeName', 'MobileNo','GSTINNo']);
                break;
            case 2:
                GetCmnPopUpSearchValAssign(element, 33, 'Lead List', [], ['ID_LeadGenerate','CustomeName', 'MobileNo']);
                break;           
            default:
                NotificationMessage({ 'type': 'info', 'heading': 'info', 'message': 'Please Select Import From' });
                break;
        }
    }

    //to show and hide new customer button
    function fn_showandHideNewCustomerButton(element) {     
        let $thisForm = $(element).closest('[perfect-class="form"]');
        if ($thisForm.find('[name="ddlImportsList"]').val() == 1) {
            $thisForm.find('[id="customerbtn"]').css("display", "block");
        }
        else {
            $thisForm.find('[id="customerbtn"]').css("display", "none");
        }
        if ($thisForm.find('[name="ddlImportsList"]').val() == 3) {
            $thisForm.find('[id="btnShowList"]').css("display", "none");
            $thisForm.find('[id="QuoAddressSection"]').css("display", "block");  
            $thisForm.find('[name="CustomeName"]').prop('readonly', false)
        }
        else {
            $thisForm.find('[id="btnShowList"]').css("display", "block");
            $thisForm.find('[id="QuoAddressSection"]').css("display", "none");
            $thisForm.find('[name="CustomeName"]').prop('readonly', true)
        }
    }


    //to New Cutomer popup
    function fn_openNewCustomerWindow(element) {
        let $select = $(element);
        let $tempModel = createSearchModalDOM().modal;
        $tempModel.find('.modal-title').addClass("d-none");
        $tempModel.show
        $tempModel.find('.modal-dialog').addClass('modal-xl')
        $tempModel.find('.modal-body').load('@Url.Action("LoadCustomerForm", "Customer")', function () {
                let $thisForm = $(this).find('[perfect-class="form"]');
                $thisForm.attr('perfect-onFormSuccess', 'fn_customerForm_loadState_success');
        });
    }

    //to open warranty window
    function fn_openWarrantyWindow(ele) {
        $('#modalWarrantyWindow').modal('show');
    }


    //to show tax window
    function fn_showTaxWindow(element, mod) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let taxinfo = [];
        if ($thisForm.data('pDataTax')) {
            if ($thisForm.data('pDataTax').length > 0) {
                taxinfo = $thisForm.data('pDataTax');
            }
            else {
                taxinfo.push($thisForm.data('pDataTax'));
            }

            let sum = 0;
            var CheckListHTML = '';
            $.each(taxinfo, function (i, value) {

                sum = sum + parseFloat(value.TaxAmount);
                CheckListHTML += "<tr>";
                CheckListHTML += "<td>" + value.SlNo + "</td>";
                CheckListHTML += "<td Class='jq_ProductID_td' Style='Display:none'>" + value.ProductID + "</td>";
                CheckListHTML += "<td class='jq_taxType_td' Style='Display:none'>" + value.FK_TaxType + "</td>";
                CheckListHTML += "<td class='jq_taxTypeName_td'>" + value.TaxtyName + "</td>";
                CheckListHTML += "<td class='jq_taxPer_td text-center'>" + value.TaxPercentage + "</td>";
                CheckListHTML += "<td class='jq_taxamount_td text-right' >  " + value.Amount + "</td>";
                CheckListHTML += "</tr>";
            })

            $("#formGroupModalTaxbody").html(CheckListHTML)

            if (mod == 1) {
                $('#formGroupModalTax').modal('show');
            }
            else {
                $('#formGroupModalTax').modal('hide');
            }

            fn_bindTaxAmount(element)
        }
        else {
            fn_bindTaxDetails("1", 'formGroupModalTax', element, mod)
        }
    }

    //to bind Tax amount
    function fn_bindTaxAmount(element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let sum = 0;

        $('#formGroupModalTaxbody tr').each(function (index, element) {
            sum = sum + parseFloat($(element).find('.jq_taxamount_td').text());
        });

        $thisForm.find('[name=SodSalTaxAmount]').val(sum.toFixed(2));
    }

    //to bind tax details
    function fn_bindTaxDetails(Mode, ModalID, element, mod)
    {
        let $thisForm = $(element).closest('[perfect-class="form"]');

        var InputData =
        {
            FK_Product: $thisForm.find('[name=FK_Product]').val(),
            Includetax: 0,

            Quantity: $thisForm.find('[name=SodSalQuantity]').val(),
            Amount: $thisForm.find('[name=SodSalPrice]').val(),
        }
        $.ajax({
            url: "@Url.Action("GetTaxAmountNew", "Quotation")",
            type: "Get",
            data: InputData,
            dataType: "json",
            contentType: "application/json",
            success: function (ajaxOutput) {
                     if (ajaxOutput.Process.IsProcess) {
                         var CheckListHTML = '';
                         let sum = 0;

                         if (ajaxOutput.Data.length > 0) {
                             $.each(ajaxOutput.Data, function (i, value) {
                                 sum = sum + parseFloat(value.TaxAmount);
                                 CheckListHTML += "<tr>";
                                 CheckListHTML += "<td>" + value.SlNo + "</td>";
                                 CheckListHTML += "<td Class='jq_ProductID_td' Style='Display:none'>" + value.ProductID + "</td>";
                                 CheckListHTML += "<td class='jq_taxType_td' Style='Display:none'>" + value.FK_TaxType + "</td>";
                                 CheckListHTML += "<td class='jq_taxTypeName_td'>" + value.TaxTyName + "</td>";
                                 CheckListHTML += "<td class='jq_taxPer_td text-center'>" + value.TaxPercentage + "</td>";
                                 CheckListHTML += "<td class='jq_taxamount_td text-right' >  "+ value.Amount + "</td>";
                                 CheckListHTML += "</tr>";
                             })
                         }
                         else {
                             CheckListHTML += "<div class='form-group col-md-6'>";
                             CheckListHTML += "<div class='form-check mb-2'>";
                             CheckListHTML += "<input type='checkbox' class='form-check-input' >"
                             CheckListHTML += "<label class='form-check-label' for='check1'>No Records...</label>";
                             CheckListHTML += "</div></div>"
                         }

                         $("#formGroupModalTaxbody").html(CheckListHTML)
                         if (mod == 1) {
                             $('#formGroupModalTax').modal('show');
                         }
                         else {
                             $('#formGroupModalTax').modal('hide');
                         }

                         fn_bindTaxAmount(element)
                     }
                     else {
                         $.each(ajaxOutput.Process.Message, function (key, value) {
                             NotificationMessage({ 'type': 'error', 'heading': 'Error', 'message': value });
                         });
                     }
                },
                complete: function () {
                    $(element).prop('disabled', false);
                }
            });
    }

    //to show other charges window
    function fn_showOtherCharges(element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let Othrinfo = [];
        if ($thisForm.data('pOthrChgData')) {
            if ($thisForm.data('pOthrChgData').length > 0) {

                Othrinfo = $thisForm.data('pOthrChgData');
            }
            else {
                Othrinfo.push($thisForm.data('pOthrChgData'));
            }

            let sum = 0;

            var CheckListHTML = '';
            $.each(Othrinfo, function (i, value) {
                sum = sum + parseFloat(value.OctyAmount);
                let options = ''
                options += '<option value=' + value.TransTypeID + '>' + value.TransType + '</option>'
                let $dropdown = '<select class="form-control" >' + options + '</select>';
                CheckListHTML += "<tr>";
                CheckListHTML += "<td>" + value.SlNo + "</td>";
                CheckListHTML += "<td Class='jq_ID_OtherChargeType_td' Style='Display:none'>" + value.ID_OtherChargeType + "</td>";
                CheckListHTML += "<td Class='jq_Type_td'>" + value.OctyName + "</td>";
                CheckListHTML += "<td class='jq_TransType_td'>" + $dropdown + "</td>";
                CheckListHTML += "<td class='jq_OtherChagAmnt_td' ><input class='form-control text-right' type='number'  value='" + value.OctyAmount + "'' /></td>";

                CheckListHTML += "</tr>";
            })

            $("#OtherChargebody").html(CheckListHTML)
            $('#formGroupModalformGroupModalOtherCharge').modal('show');
        }
        else {
            fn_bindOtherChargesDetails("1", 'formGroupModalOtherCharge', element)
        }
    }

    //to bind other charges details
    function fn_bindOtherChargesDetails(Mode, ModalID, element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        var InputData =
        {
           TransMode: 'SL',
        }

        $.ajax({
            url: "@Url.Action("GetOtherCharges", "Quotation")",
            type: "Get",
            data: InputData,
            dataType: "json",
            contentType: "application/json",
            success: function (ajaxOutput)
            {
                if (ajaxOutput.OtherCharges.Process.IsProcess) {
                         var CheckListHTML = '';
                         let sum = 0;
                         if (ajaxOutput.OtherCharges.Data.length > 0) {
                             let options =''
                             $.each(ajaxOutput.Transtypelist.Data, function (i, value) {
                                 options += '<option value=' + value.TransTypeID + '>' + value.TransType+'</option>'
                             });
                             $.each(ajaxOutput.OtherCharges.Data, function (i, value) {
                                 let $dropdown = '<select class="form-control" >' + options + '</select>';
                                 sum = sum + parseFloat(value.OctyAmount);
                                 CheckListHTML += "<tr>";
                                 CheckListHTML += "<td>" + value.SlNo + "</td>";
                                 CheckListHTML += "<td Class='jq_ID_OtherChargeType_td' Style='Display:none'>" + value.ID_OtherChargeType + "</td>";
                                 CheckListHTML += "<td Class='jq_Type_td'>" + value.OctyName + "</td>";
                                 CheckListHTML += "<td class='jq_TransType_td'>" + $dropdown + "</td>";
                                 CheckListHTML += "<td class='jq_OtherChagAmnt_td' ><input  class='form-control text-right' type='number'  value='" + value.OctyAmount + "' ' /></td> /></td>";
                                 CheckListHTML += "</tr>";
                             })
                         }
                         else
                         {
                             CheckListHTML += "<div class='form-group col-md-6'>";
                             CheckListHTML += "<div class='form-check mb-2'>";
                             CheckListHTML += "<label class='form-check-label' for='check1'>No Records...</label>";
                             CheckListHTML += "</div></div>"
                         }
                         $("#formGroupModalOtherChargebody").html(CheckListHTML)
                         $('#formGroupModalOtherCharge').modal('show');
                     }
                else
                {
                    $.each(ajaxOutput.OtherCharges.Process.Message, function (key, value) {
                             NotificationMessage({ 'type': 'error', 'heading': 'Error', 'message': value });
                    });
                }
            },
            complete: function ()
            {
                $(element).prop('disabled', false);
                $('select').selectpicker('refresh');
            }
        });
    }

    //to bind other charges amount into textbox
    function fn_bindOtherChargesAmount(element) {
        let $modal = $(element).closest('.modal');
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let sum = 0;
        $modal.find('table tbody').find('tr').each(function () {
            let value = parseFloat($(this).find('.jq_OtherChagAmnt_td').find('input').val())
            if (parseInt($(this).find('.jq_TransType_td').find('select').val()) == 0) {
                value = value * 0;
            }
            else if (parseInt($(this).find('.jq_TransType_td').find('select').val()) == 1) {
                value = value * -1;
            }
            else {
                value = value * 1;
            }
            sum = sum + value;
        });
        $thisForm.find('[name=OtherCharge]').val(sum);
        fn_roundoff(element)
    }


    var tableOptionsTempOut = {
        iconButton: {
            buttons: [
                {
                    icon: "fa fa-pencil",
                    action: function () {
                        let savedData = $(this).closest('tr').data('pData')

                        let $tablecontainer = $(this).closest('[perfect-tempTable]');
                        let tableKey = $tablecontainer.attr('perfect-tempTable');
                        let $thisForm = $tablecontainer.closest('[perfect-class="form"]');

                        let indexname = tableKey + 'index';


                        let rindex = $(this).closest('tr').attr(indexname);

                        $tablecontainer.attr('perfect-tempTable-action', rindex);

                        $thisForm.find('[perfect-tempTable-' + tableKey + ']').each(function () {
                            let $thisNode = $(this);
                            let pf_name = $thisNode.attr('name');
                            if ($thisNode.is('select')) {

                                $thisNode.val(savedData[pf_name]).selectpicker('refresh');

                            }
                            else if ($thisNode.is('input')) {
                                let inputType = $thisNode.attr('type').toLocaleLowerCase();
                                if ($thisNode.attr('type').toLocaleLowerCase() == 'checkbox') {

                                    $thisNode.prop('checked', savedData[pf_name]);
                                }
                                else {
                                    $thisNode.val(savedData[pf_name]);
                                }
                            }
                            else {
                                $thisNode.val(savedData[pf_name]);
                            }
                        });
                    }
                },
                {
                    icon: "fa fa-trash",
                    action: function () {
                        let $thistbl = $(this).closest('table');
                        let table = $thistbl.DataTable();
                        table.destroy();
                        if ($(this).closest('tbody').find('tr').length > 1) {
                            $(this).closest('tr').remove();
                            pft_table_slreset($thistbl);
                        }
                        else {
                            $thistbl.remove();
                        }

                    }
                },
            ]
        },

        rowAttribute: [],
        renameHeader: { "FK_Product": "FK_Product", "ProdName": "Product", "SodSalQuantity": "Qty", "SodMRP": "MRP", "Sprice": "Qty*Price", "SodSalPrice": "Price", "SodSalDiscount": "Disc Amt", "SodSalDiscountPercent": "Disc %","SodSalTaxAmount":"Tax Amount", "SodRemarks":"Remarks"},
        hideColumn: ['ID_SalesOrderDetails', 'FK_SalesOrder', 'FK_Product'],
        serialNo: true,

    };

    //to create sales order items details table
    function fn_createTable(element, tkey, uniq = [])
    {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let tableKey = tkey;
        let $tblcontainer = $thisForm.find('[perfect-tempTable="' + tableKey + '"]');

        let insertData = {};
        let tableOptionsTemp = tableOptionsTempOut;

        let unique = (uniq) ? uniq : [];

        let isValid = true;
        let errorClass = '.temptableError';


        let lastIndex = ($tblcontainer.attr('perfect-tempTable-lastindex')) ? parseInt($tblcontainer.attr('perfect-tempTable-lastindex')) : 0;
        let thisactionIndex = ($tblcontainer.attr('perfect-tempTable-action')) ? parseInt($tblcontainer.attr('perfect-tempTable-action')) : 0;
        let indexname = tkey + 'index';
        tableOptionsTemp.rowAttribute.push(indexname);
        tableOptionsTemp.hideColumn.push(indexname);
        let updateCond = '';
        let isNew = true;

        if (thisactionIndex > 0) {
            insertData[indexname] = thisactionIndex;
            updateCond = '[' + indexname + '="' + thisactionIndex + '"]';
            isNew = false;
        }
        else {
            insertData[indexname] = lastIndex + 1;
            $tblcontainer.attr('perfect-tempTable-lastindex', lastIndex + 1);
            isNew = true;
        }
        if ($thisForm.find('[perfect-tempTable-' + tableKey + '="ProdName"]').val().length == 0 || $thisForm.find('[perfect-tempTable-' + tableKey + '="ProdName"]').val().length == null) {
            isValid = false;

            $thisForm.find('[perfect-tempTable-' + tableKey + '="ProdName"]').closest('[perfect-class="formGroup"]').find(errorClass).text('Please select the product');
        }
        else {
            $thisForm.find('[perfect-tempTable-' + tableKey + '="ProdName"]').closest('[perfect-class="formGroup"]').find(errorClass).text('');
        }

        let prodQty = (isNaN($thisForm.find('[perfect-tempTable-' + tableKey + '="SodSalQuantity"]').val()) ? 0 : $thisForm.find('[perfect-tempTable-' + tableKey + '="SodSalQuantity"]').val())

        if (prodQty < 1) {
            isValid = false;
            $thisForm.find('[perfect-tempTable-' + tableKey + '="SodSalQuantity"]').closest('[perfect-class="formGroup"]').find(errorClass).text('Please enter at least one qty');
        }
        else {
            $thisForm.find('[perfect-tempTable-' + tableKey + '="SodSalQuantity"]').closest('[perfect-class="formGroup"]').find(errorClass).text('');
        }

        let prodPrice = (isNaN($thisForm.find('[perfect-tempTable-' + tableKey + '="SalPrice"]').val()) ? 0 : $thisForm.find('[perfect-tempTable-' + tableKey + '="SodSalQuantity"]').val())

        if (prodPrice < 1) {
            isValid = false;
            $thisForm.find('[perfect-tempTable-' + tableKey + '="SalPrice"]').closest('[perfect-class="formGroup"]').find(errorClass).text('Invalid price');
        }
        else {
            $thisForm.find('[perfect-tempTable-' + tableKey + '="SalPrice"]').closest('[perfect-class="formGroup"]').find(errorClass).text('');
        }
       
        if (unique.length > 0) {
            let prevData = [];
            $tblcontainer.find('table > tbody').find('tr').each(function () {
                if (isNew) {
                    prevData.push($(this).data('pData'));
                }
                else {
                    if (parseInt($(this).attr(indexname)) != thisactionIndex) {
                        prevData.push($(this).data('pData'));
                    }

                }

            })

            unique.forEach(function (key, i) {
                let $thisEle = $thisForm.find('[perfect-tempTable-' + tableKey + '="' + key + '"]');
                let headerEleName = $thisForm.find('[name="lblProName"]').text();
                let atname = $thisEle.attr('name');
                let cvalue;


                if ($thisEle.length != 0) {
                    let $errorElement = $thisEle.closest('[perfect-class="formGroup"]').find(errorClass);
                    let errmessage = headerEleName + " Already exits"

                    if ($thisEle.is('select')) {
                        cvalue = $thisEle.val();

                    }
                    else if ($thisEle.is('input')) {

                        let inputEleType = $thisEle.attr('type').toLocaleLowerCase();

                        if (inputEleType == 'checkbox') { cvalue = $thisEle.is(':checked'); }
                        else if (inputEleType == 'hidden') { cvalue = $thisEle.val(); }
                        else { cvalue = $thisEle.val(); }
                    }
                    else {
                        cvalue = $thisEle.val();
                    }

                    if (prevData.find(a => a[atname] == cvalue)) {
                        $errorElement.text(errmessage);
                        isValid = false;
                    }
                }
            });

        }
        if (isValid) {
            $thisForm.find('[perfect-tempTable-' + tableKey + ']').each(function () {
                let $this = $(this);
                let headerName = $this.attr('perfect-tempTable-' + tableKey);
                let nameAttr = $this.attr('name');
                if ($this.is('select')) {
                    tableOptionsTemp.renameHeader[nameAttr + '_d'] = headerName;
                    tableOptionsTemp.hideColumn.push(nameAttr)
                    if ($this.val() != null) {
                        let selectText = ($this.val().length == 0) ? '' : $this.children(":selected").text();
                        insertData[nameAttr + '_d'] = selectText;
                    }
                    else {
                        let selectText = ($this.val() == null) ? '' : $this.children(":selected").text();
                        insertData[nameAttr + '_d'] = selectText;
                    }
                    insertData[nameAttr] = $this.val();

                    $this.val('').selectpicker('refresh');
                }
                else if ($this.is('input')) {

                    let inputType = $this.attr('type').toLocaleLowerCase();

                        if (inputType == 'checkbox') {

                            insertData[nameAttr] = $this.is(':checked');

                            tableOptionsTemp.isCheckType.push(nameAttr)
                            //clear field
                            $this.prop('checked', false);

                        }
                        else if (inputType == 'hidden') {
                            insertData[nameAttr] = $this.val();
                            $this.val('');

                        }

                    else {
                        insertData[nameAttr] = $this.val();

                        $this.val('');
                    }
                }
                else {
                    insertData[nameAttr] = $this.val();

                    $this.val('');
                }
            });

            if (isNew) {
                if ($tblcontainer.find('table').length == 0) {
                    $tblcontainer.append(pft_table_createtable([insertData], tableOptionsTemp));
                }
                else {
                    let table = $tblcontainer.find('table').DataTable()
                    table.destroy()
                    pft_table_addTableRow($tblcontainer.find('table'), insertData, tableOptionsTemp);
                }
            }
            else {
                let table = $tblcontainer.find('table').DataTable()
                table.destroy()
                pft_table_replaceTableRow($tblcontainer.find('table'), updateCond, insertData, tableOptionsTemp);
            }

            $tblcontainer.attr('perfect-tempTable-action', 0);
        }
        fn_bindBillDetails(element)
        fn_roundoff(element);
    }
    function fn_bindBillDetails(element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let sprice = 0;
        let stax = 0;
        let sdisc = 0;
        let billttl = 0;

        $('#QuotationItemHead').find('tbody tr').each(function (index, element) {
            sprice = sprice + parseFloat($(element).find('.Sprice').text());
            sdisc = sdisc + parseFloat($(element).find('.SodSalDiscount').text());
            stax = stax + parseFloat($(element).find('.SodSalTaxAmount').text());
        });
        billttl = (sprice + stax) - sdisc;
        $thisForm.find('[name=SalBillTotal]').val(billttl.toFixed(2));
    }

    function fn_calculateActualPrice(element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let Spric = $thisForm.find('[name="SodSalPrice"]').val() == "" ? "0" : $thisForm.find('[name="SodSalPrice"]').val();
        let qtys = $thisForm.find('[name="SodSalQuantity"]').val() == "" ? "0" : $thisForm.find('[name="SodSalQuantity"]').val();
        $thisForm.find('[name=Sprice]').val(parseFloat(Spric) * parseFloat(qtys));
        fn_calculateDiscAmount(element)
        fn_showTaxWindow(element, 0)
    }

    function fn_calculateDiscAmount(element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let Sprice = $thisForm.find('[name="SodSalPrice"]').val() == "" ? "0" : $thisForm.find('[name="SodSalPrice"]').val();
        let qty = $thisForm.find('[name="SodSalQuantity"]').val() == "" ? "0" : $thisForm.find('[name="SodSalQuantity"]').val();
        let disp = $thisForm.find('[name="SodSalDiscountPercent"]').val() == "" ? "0" : $thisForm.find('[name="SodSalDiscountPercent"]').val();
        let discam = (parseFloat(Sprice) * parseFloat(qty) * parseFloat(disp)) / 100;

        $thisForm.find('[name=SodSalDiscount]').val(discam);
    }
    function fn_calculateDiscPer(ele) {

        let $thisForm = $(ele).closest('[perfect-class="form"]');
        let Sprice = $thisForm.find('[name="SodSalPrice"]').val() == "" ? "0" : $thisForm.find('[name="SodSalPrice"]').val();
        let qty = $thisForm.find('[name="SodSalQuantity"]').val() == "" ? "0" : $thisForm.find('[name="SodSalQuantity"]').val();
        let disamt = $thisForm.find('[name="SodSalDiscount"]').val() == "" ? "0" : $thisForm.find('[name="SodSalDiscount"]').val();
        let discper = (parseFloat(disamt) * 100) / (parseFloat(Sprice) * parseFloat(qty));

        $thisForm.find('[name=SodSalDiscountPercent]').val(discper);
    }

    function fn_roundoff(element) {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        let biltl = 0;
        let otherchg = 0;
        let saldisc = 0;
        let salroundof = 0;
        let result = 0;
        biltl = parseFloat($thisForm.find('[name="SalBillTotal"]').val() == "" ? "0" : $thisForm.find('[name="SalBillTotal"]').val());
        otherchg = parseFloat($thisForm.find('[name="OtherCharge"]').val() == "" ? "0" : $thisForm.find('[name="OtherCharge"]').val());
        saldisc = parseFloat($thisForm.find('[name="SalOrderDiscount"]').val() == "" ? "0" : $thisForm.find('[name="SalOrderDiscount"]').val());
        result = biltl + otherchg - saldisc;
        salroundof = Math.round(result) - (result);
        $thisForm.find('[name=SalOrderRoundoff]').val(salroundof.toFixed(2));
        $thisForm.find('[name=SalNetAmount]').val(Math.round(result));
    }


    

    //to save data
    function fn_UpdateQuotation(element,actionType)
    {
        let $thisForm = $(element).closest('[perfect-class="form"]');
        if ($thisForm.valid())
            {
                    $(element).prop('disabled', true);
                    let $thisForm = $(element).closest('[perfect-class="form"]');
                    let $modal = $thisForm.find('#zero_config');

                    let tax = [];
                    $modal.find('tbody').find('tr').each(function () {
                        let taxinfo = {};
                        taxinfo['ProductID'] = $thisForm.find('[name=ProductID]').val();
                        taxinfo['FK_TaxType'] = $(this).find('.jq_taxType_td').text();
                        taxinfo['TaxTyName'] = $(this).find('.jq_taxTypeName_td').text();
                        taxinfo['TaxPercentage'] = $(this).find('.jq_taxPer_td').text();
                        taxinfo['TaxAmount'] = $(this).find('.jq_taxamount_td').find('input').val();
                        tax.push(taxinfo);
                    });

                    let $modal2 = $thisForm.find('#zero_configOthercharge');
                    let OtherCharge = [];
                    $modal2.find('tbody').find('tr').each(function () {
                        let OtChargeinfo = {};
                        OtChargeinfo['ID_OtherChargeType'] = $(this).find('.jq_ID_OtherChargeType_td').text();
                        OtChargeinfo['OctyTransType'] = $(this).find('.jq_TransType_td').find('select').val();
                        OtChargeinfo['OctyName'] = $(this).find('.jq_Type_td').text();
                        OtChargeinfo['OctyAmount'] = $(this).find('.jq_OtherChagAmnt_td').find('input').val();

                        OtherCharge.push(OtChargeinfo);
                    });

                  let quotationItems = [];
                 $thisForm.find('[perfect-tempTable="Quotation"]').find('tbody').find('tr').each(function () {
                     quotationItems.push($(this).data('pData'));
                    })

                    let _ID_SalesOrder = 0;
                    let _ActionUrl = "";

                    if (actionType === "new") {
                        _ID_SalesOrder = 0;
                        _ActionUrl = "@Url.Action("AddNewQuotation", "Quotation")";
                    }
                    else if (actionType === "update") {
                        _ID_SalesOrder = $thisForm.find('[name="ID_SalesOrder"]').val();
                        _ActionUrl = "@Url.Action("UpdateQuotation", "Quotation")";
                    }

                    let inputData = {
                        __RequestVerificationToken: $('[name="__RequestVerificationToken"]').val(),
                        'ID_SalesOrder': _ID_SalesOrder,
                        'SoNo': $thisForm.find('[name="QuotationNo"]').val(),
                        'TransMode': 'INQU',
                        'SoDate': $thisForm.find('[name="SalesOrderDate"]').val(),
                        'SoDeliverydate': $thisForm.find('[name="SalesOrdExpDate"]').val(),
                        'SoAdvcAmount': 0,
                        'SoBillTotal': $thisForm.find('[name="SalBillTotal"]').val(),
                        'SoDiscount': $thisForm.find('[name="SalOrderDiscount"]').val(),
                        'SoOthercharges': $thisForm.find('[name="OtherCharge"]').val(),
                        'SoRoundoff': $thisForm.find('[name="SalOrderRoundoff"]').val(),
                        'SoNetAmount': $thisForm.find('[name="SalNetAmount"]').val(),
                        'SoQuotation': true,
                        'TaxtyIntrastate': $thisForm.find('[name="RoundOff"]').val(),
                        'FK_Customer': $thisForm.find('[name="ID_Customer"]').val(),
                        'FK_LeadGenerate': $thisForm.find('[name="ID_LeadGenerate"]').val(),
                        'FK_Quotation': $thisForm.find('[name="ID_Quotation"]').val(),
                        'SoAddress': $thisForm.find('[name="SoAddress"]').val(),
                        'SalesOrderDetail': quotationItems,
                        'TaxDetails': tax,
                        'OtherChgDetails': OtherCharge
                    };

                    if (quotationItems.length > 0)
                            {
                               $.ajax({
                                         url: _ActionUrl,
                                         type: "POST",
                                         data: inputData,
                                         dataType: "json",
                                         contentType: 'application/x-www-form-urlencoded; charset=utf-8',
                                         success: function (ajaxOutput) {
                                             if (ajaxOutput.Process.IsProcess) {
                                                 $.each(ajaxOutput.Process.Message, function (key, value) {
                                                     NotificationMessage({ 'type': 'success', 'heading': 'Success', 'message': value });
                                                 });
                                             }
                                             else {
                                                 $.each(ajaxOutput.Process.Message, function (key, value) {
                                                     NotificationMessage({ 'type': 'error', 'heading': 'Error', 'message': error.message });
                                                 });
                                             }

                                             $thisForm.find('[perfect-ctype="select"]').val('').selectpicker('refresh');
                                             $thisForm.find('[perfect-ctype="input"]').val('');
                                             $thisForm.find('[perfect-ctype="date"]').val('');
                                             let onSuccess = $thisForm.attr('perfect-onFormSuccess')
                                             if (onSuccess) {
                                                 window[onSuccess]();
                                                 fn_resetSalesOrder(element);
                                                 fn_loadSaleOrderList(element)
                                             }
                                         },
                                         complete: function ()
                                         {
                                                $(element).prop('disabled', false);
                                         }
                                    });
                            }
                            else
                            {
                                let $modal = createSearchModalDOM();

                                let $message = '<span>Enter Atleast One Product !!!</span>';
                                $modal.modal.find('.modal-body')
                                    .addClass('text-black')
                                    .html($message);
                                $modal.modal.find('.modal-title')
                                    .addClass('text-primary')
                                    .text('Message');
                                $modal.modal.show();
                            }
                     }
    }
    //to reset sales order window
    function fn_resetQuotation(ele) {
        let $thisForm = $(ele).closest('[perfect-class="form"]');

        let pData = $thisForm.data('pData');
        if (pData) {
            $.each(pData, function (oneKey, onevalue) {
                if ($thisForm.find('[name=' + oneKey + ']').attr('perfect-ctype') == 'date') {
                    $thisForm.find('[name=' + oneKey + ']').val(moment(onevalue).format('YYYY-MM-DD'));
                }
                else if ($thisForm.find('[name=' + oneKey + ']').attr('perfect-ctype') == 'select') {
                    $thisForm.find('[name=' + oneKey + ']').val(onevalue).selectpicker('refresh');
                }
                else {
                    $thisForm.find('[name=' + oneKey + ']').val(onevalue);
                }
            });
        }
        else {
            $thisForm.find('[perfect-ctype="select"]').val('').selectpicker('refresh');
            $thisForm.find('[perfect-ctype="input"]').val('');
            $thisForm.find('[perfect-ctype="date"]').val('');
            $thisForm.find('[perfect-tempTable="Quotation"]').html('');
            fn_loadSaleOrderForm();
        }
        $thisForm.validate().resetForm();
    }
    // to reset Item details
    function fn_resetQuotationItem(ele) {
        let $thisItem = $(ele).closest('[perfect-class="TempTableProduct"]');
        $thisItem.find('[perfect-ctype="input"]').val('');
    }
    
</script>



